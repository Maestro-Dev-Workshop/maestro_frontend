<header class="flex flex-row justify-between items-center mx-4 my-2 lg:m-8 space-y-4 md:space-y-0">
  <!-- Left: logo + title (styling follows first block) -->
  <a routerLink="/" class="flex flex-row items-center no-underline mx-4 md:mx-8">
    <img src="images/logo-coloured.svg" alt="Maestro Logo" class="w-8 md:w-12 mr-2">
    <span class="text-lg md:text-2xl h-max text-prussian-blue-900 font-serif">Maestro</span>
  </a>

  <!-- Center / Right: nav + actions -->
  <div class="flex flex-row items-center mx-4 md:mx-8 space-x-4 md:space-x-8">
    <!-- Actions: Logout button + profile image -->
  </div>
  <button
    class="rounded-full p-1 hover:bg-gray-100"
    (click)="popout()"
  >
    <img src="images/profile-icon.svg" alt="Profile" class="w-8 md:w-12">
  </button>
</header>

<!-- Account Menu -->
@if (showAccount()) {
  <div class="absolute top-16 lg:top-24 right-4 lg:right-8 flex flex-col items-start p-4 rounded-xl text-gray-600 bg-white shadow-lg w-[90vw] max-w-sm space-y-4">

    <!-- Account info -->
    <div class="flex flex-row items-center">
      <img src="images/profile-icon.svg" alt="" class="w-6 mr-2">
      <div>
        <h3 class="font-semibold text-gray-700">Account</h3>
        <span class="text-sm font-light">{{ email() }}</span>
      </div>
    </div>

    <!-- PLAN BOX â€” NEW SECTION -->
    <div class="w-full border border-prussian-blue-800/40 rounded-xl p-4">
      <div class="flex justify-between items-center mb-2">
        <div class="flex items-center space-x-2">
          <img src="images/coin.svg" class="w-5 h-5" alt="">
          <span class="font-medium">Free Plan</span>
        </div>

        <button class="text-prussian-blue-900 underline text-sm" (click)="goToUpgrade()">
          Upgrade
        </button>
      </div>

      <!-- PROGRESS BAR -->
      <div>
        <div class="w-full h-3 bg-gray-200 rounded-full overflow-hidden">
          <div class="h-full bg-prussian-blue-800 rounded-full" 
               [style.width.%]="creditPercent()">
          </div>
        </div>
        <p class="text-xs mt-1">{{ creditsUsed() }}/20 Lessons Created</p>
      </div>
    </div>

    <!-- Logout -->
    <button
      class="flex flex-row items-center w-full hover:bg-gray-100 py-2 rounded-lg"
      (click)="openLogout()"
    >
      <img src="images/logout-icon.svg" alt="" class="w-6 mx-1">
      Logout
    </button>
  </div>
}


<!-- Confirm logout modal / component (Angular) -->
@if (showLogout()) {
  <app-confirmation
    (cancel)="cancelLogout()"
    (confirm)="confirmLogout()"
    [title]="'Logout'"
    [message]="'Are you sure you want to log out?'"
    [acceptText]="'Yes, Logout'"
    [cancelText]="'Cancel'"
  >
  </app-confirmation>
}

@if (pageLoading) {
  <div class="fixed inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center">
    <div class="flex flex-col items-center">
      <img src="images/spinner.gif" alt="" class="w-24 mb-4">
      <span class="text-4xl">Loading Subscription Plans...</span>
    </div>
  </div>
}

